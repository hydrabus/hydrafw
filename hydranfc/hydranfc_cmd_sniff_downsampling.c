/*
    HydraBus/HydraNFC - Copyright (C) 2012-2014 Benjamin VERNOUX

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
*/
#include "hydranfc_cmd_sniff_downsampling.h"

/* Downsampling by 2 + Filtering using Majority Rule 8 bit In => 2 bit Out
Rule => 11 => 1 else 0
00 = 0
10 = 0
11 = 1
Input 8 bits => Output 4bits filtered
*/
const u08_t downsample_2x[256]=
{
    0, /* v0 0000 0000 */
    0, /* v1 0000 0001 */
    0, /* v2 0000 0010 */
    1, /* v3 0000 0011 */
    0, /* v4 0000 0100 */
    0, /* v5 0000 0101 */
    0, /* v6 0000 0110 */
    1, /* v7 0000 0111 */
    0, /* v8  0000 1000 */
    0, /* v9  0000 1001 */
    0, /* v10 0000 1010 */
    1, /* v11 0000 1011 */
    2, /* v12 0000 1100 */
    2, /* v13 0000 1101 */
    2, /* v14 0000 1110 */
    3, /* v15 0000 1111 */

    0, /* v16 0001 0000 */
    0, /* v17 0001 0001 */
    0, /* v18 0001 0010 */
    1, /* v19 0001 0011 */
    0, /* v20 0001 0100 */
    0, /* v21 0001 0101 */
    0, /* v22 0001 0110 */
    1, /* v23 0001 0111 */
    0, /* v24 0001 1000 */
    0, /* v25 0001 1001 */
    0, /* v26 0001 1010 */
    1, /* v27 0001 1011 */
    2, /* v28 0001 1100 */
    2, /* v29 0001 1101 */
    2, /* v30 0001 1110 */
    3, /* v31 0001 1111 */

    0, /* v32 0010 0000 */
    0, /* v33 0010 0001 */
    0, /* v34 0010 0010 */
    1, /* v35 0010 0011 */
    0, /* v36 0010 0100 */
    0, /* v37 0010 0101 */
    0, /* v38 0010 0110 */
    1, /* v39 0010 0111 */
    0, /* v40 0010 1000 */
    0, /* v41 0010 1001 */
    0, /* v42 0010 1010 */
    1, /* v43 0010 1011 */
    2, /* v44 0010 1100 */
    2, /* v45 0010 1101 */
    2, /* v46 0010 1110 */
    3, /* v47 0010 1111 */

    4, /* v48 0011 0000 */
    4, /* v49 0011 0001 */
    4, /* v50 0011 0010 */
    5, /* v51 0011 0011 */
    4, /* v52 0011 0100 */
    4, /* v53 0011 0101 */
    4, /* v54 0011 0110 */
    5, /* v55 0011 0111 */
    4, /* v56 0011 1000 */
    4, /* v57 0011 1001 */
    4, /* v58 0011 1010 */
    5, /* v59 0011 1011 */
    6, /* v60 0011 1100 */
    6, /* v61 0011 1101 */
    6, /* v62 0011 1110 */
    7, /* v63 0011 1111 */

    0, /* v64 0100 0000 */
    0, /* v65 0100 0001 */
    0, /* v66 0100 0010 */
    1, /* v67 0100 0011 */
    0, /* v68 0100 0100 */
    0, /* v69 0100 0101 */
    0, /* v70 0100 0110 */
    1, /* v71 0100 0111 */
    0, /* v72 0100 1000 */
    0, /* v73 0100 1001 */
    0, /* v74 0100 1010 */
    1, /* v75 0100 1011 */
    2, /* v76 0100 1100 */
    2, /* v77 0100 1101 */
    2, /* v78 0100 1110 */
    3, /* v79 0100 1111 */

    0, /* v80 0101 0000 */
    0, /* v81 0101 0001 */
    0, /* v82 0101 0010 */
    1, /* v83 0101 0011 */
    0, /* v84 0101 0100 */
    0, /* v85 0101 0101 */
    0, /* v86 0101 0110 */
    1, /* v87 0101 0111 */
    0, /* v88 0101 1000 */
    0, /* v89 0101 1001 */
    0, /* v90 0101 1010 */
    1, /* v91 0101 1011 */
    2, /* v92 0101 1100 */
    2, /* v93 0101 1101 */
    2, /* v94 0101 1110 */
    3, /* v95 0101 1111 */

    0, /* v96  0110 0000 */
    0, /* v97  0110 0001 */
    0, /* v98  0110 0010 */
    1, /* v99  0110 0011 */
    0, /* v100 0110 0100 */
    0, /* v101 0110 0101 */
    0, /* v102 0110 0110 */
    1, /* v103 0110 0111 */
    0, /* v104 0110 1000 */
    0, /* v105 0110 1001 */
    0, /* v106 0110 1010 */
    1, /* v107 0110 1011 */
    2, /* v108 0110 1100 */
    2, /* v109 0110 1101 */
    2, /* v110 0110 1110 */
    3, /* v111 0110 1111 */

    4, /* v112 0111 0000 */
    4, /* v113 0111 0001 */
    4, /* v114 0111 0010 */
    5, /* v115 0111 0011 */
    4, /* v116 0111 0100 */
    4, /* v117 0111 0101 */
    4, /* v118 0111 0110 */
    5, /* v119 0111 0111 */
    4, /* v120 0111 1000 */
    4, /* v121 0111 1001 */
    4, /* v122 0111 1010 */
    5, /* v123 0111 1011 */
    6, /* v124 0111 1100 */
    6, /* v125 0111 1101 */
    6, /* v126 0111 1110 */
    7, /* v127 0111 1111 */

    0, /* v128 1000 0000 */
    0, /* v129 1000 0001 */
    0, /* v130 1000 0010 */
    1, /* v131 1000 0011 */
    0, /* v132 1000 0100 */
    0, /* v133 1000 0101 */
    0, /* v134 1000 0110 */
    1, /* v135 1000 0111 */
    0, /* v136 1000 1000 */
    0, /* v137 1000 1001 */
    0, /* v138 1000 1010 */
    1, /* v139 1000 1011 */
    2, /* v140 1000 1100 */
    2, /* v141 1000 1101 */
    2, /* v142 1000 1110 */
    3, /* v143 1000 1111 */

    0, /* v144 1001 0000 */
    0, /* v145 1001 0001 */
    0, /* v146 1001 0010 */
    1, /* v147 1001 0011 */
    0, /* v148 1001 0100 */
    0, /* v149 1001 0101 */
    0, /* v150 1001 0110 */
    1, /* v151 1001 0111 */
    0, /* v152 1001 1000 */
    0, /* v153 1001 1001 */
    0, /* v154 1001 1010 */
    1, /* v155 1001 1011 */
    2, /* v156 1001 1100 */
    2, /* v157 1001 1101 */
    2, /* v158 1001 1110 */
    3, /* v159 1001 1111 */

    0, /* v160 1010 0000 */
    0, /* v161 1010 0001 */
    0, /* v162 1010 0010 */
    1, /* v163 1010 0011 */
    0, /* v164 1010 0100 */
    0, /* v165 1010 0101 */
    0, /* v166 1010 0110 */
    1, /* v167 1010 0111 */
    0, /* v168 1010 1000 */
    0, /* v169 1010 1001 */
    0, /* v170 1010 1010 */
    1, /* v171 1010 1011 */
    2, /* v172 1010 1100 */
    2, /* v173 1010 1101 */
    2, /* v174 1010 1110 */
    3, /* v175 1010 1111 */

    4, /* v176 1011 0000 */
    4, /* v177 1011 0001 */
    4, /* v178 1011 0010 */
    5, /* v179 1011 0011 */
    4, /* v180 1011 0100 */
    4, /* v181 1011 0101 */
    4, /* v182 1011 0110 */
    5, /* v183 1011 0111 */
    4, /* v184 1011 1000 */
    4, /* v185 1011 1001 */
    4, /* v186 1011 1010 */
    5, /* v187 1011 1011 */
    6, /* v188 1011 1100 */
    6, /* v189 1011 1101 */
    6, /* v190 1011 1110 */
    7, /* v191 1011 1111 */

    8, /* v192 1100 0000 */
    8, /* v193 1100 0001 */
    8, /* v194 1100 0010 */
    9, /* v195 1100 0011 */
    8, /* v196 1100 0100 */
    8, /* v197 1100 0101 */
    8, /* v198 1100 0110 */
    9, /* v199 1100 0111 */
    8, /* v200 1100 1000 */
    8, /* v201 1100 1001 */
    8, /* v202 1100 1010 */
    9, /* v203 1100 1011 */
    10, /* v204 1100 1100 */
    10, /* v205 1100 1101 */
    10, /* v206 1100 1110 */
    11, /* v207 1100 1111 */

    8, /* v208 1101 0000 */
    8, /* v209 1101 0001 */
    8, /* v210 1101 0010 */
    9, /* v211 1101 0011 */
    8, /* v212 1101 0100 */
    8, /* v213 1101 0101 */
    8, /* v214 1101 0110 */
    9, /* v215 1101 0111 */
    8, /* v216 1101 1000 */
    8, /* v217 1101 1001 */
    8, /* v218 1101 1010 */
    9, /* v219 1101 1011 */
    10, /* v220 1101 1100 */
    10, /* v221 1101 1101 */
    10, /* v222 1101 1110 */
    11, /* v223 1101 1111 */

    8, /* v224 1110 0000 */
    8, /* v225 1110 0001 */
    8, /* v226 1110 0010 */
    9, /* v227 1110 0011 */
    8, /* v228 1110 0100 */
    8, /* v229 1110 0101 */
    8, /* v230 1110 0110 */
    9, /* v231 1110 0111 */
    8, /* v232 1110 1000 */
    8, /* v233 1110 1001 */
    8, /* v234 1110 1010 */
    9, /* v235 1110 1011 */
    10, /* v236 1110 1100 */
    10, /* v237 1110 1101 */
    10, /* v238 1110 1110 */
    11, /* v239 1110 1111 */

    12, /* v240 1111 0000 */
    12, /* v241 1111 0001 */
    12, /* v242 1111 0010 */
    13, /* v243 1111 0011 */
    12, /* v244 1111 0100 */
    12, /* v245 1111 0101 */
    12, /* v246 1111 0110 */
    13, /* v247 1111 0111 */
    12, /* v248 1111 1000 */
    12, /* v249 1111 1001 */
    12, /* v250 1111 1010 */
    13, /* v251 1111 1011 */
    14, /* v252 1111 1100 */
    14, /* v253 1111 1101 */
    14, /* v254 1111 1110 */
    15  /* v255 1111 1111 */
};

/* Downsampling by 4 + Filtering using Majority Rule 8 bit In => 2 bit Out
Rule => consecutive 11 or 111 or 1111 => 1 else 0
Input 8 bits => Output 2bits
*/
const u08_t downsample_4x[256]=
{
    0, /* v0 0000 0000 */
    0, /* v1 0000 0001 */
    0, /* v2 0000 0010 */
    1, /* v3 0000 0011 */
    0, /* v4 0000 0100 */
    0, /* v5 0000 0101 */
    1, /* v6 0000 0110 */
    1, /* v7 0000 0111 */
    0, /* v8  0000 1000 */
    0, /* v9  0000 1001 */
    0, /* v10 0000 1010 */
    1, /* v11 0000 1011 */
    1, /* v12 0000 1100 */
    1, /* v13 0000 1101 */
    1, /* v14 0000 1110 */
    1, /* v15 0000 1111 */

    0, /* v16 0001 0000 */
    0, /* v17 0001 0001 */
    0, /* v18 0001 0010 */
    1, /* v19 0001 0011 */
    0, /* v20 0001 0100 */
    0, /* v21 0001 0101 */
    1, /* v22 0001 0110 */
    1, /* v23 0001 0111 */
    0, /* v24 0001 1000 */
    0, /* v25 0001 1001 */
    0, /* v26 0001 1010 */
    1, /* v27 0001 1011 */
    1, /* v28 0001 1100 */
    1, /* v29 0001 1101 */
    1, /* v30 0001 1110 */
    1, /* v31 0001 1111 */

    0, /* v32 0010 0000 */
    0, /* v33 0010 0001 */
    0, /* v34 0010 0010 */
    1, /* v35 0010 0011 */
    0, /* v36 0010 0100 */
    0, /* v37 0010 0101 */
    1, /* v38 0010 0110 */
    1, /* v39 0010 0111 */
    0, /* v40 0010 1000 */
    0, /* v41 0010 1001 */
    0, /* v42 0010 1010 */
    1, /* v43 0010 1011 */
    1, /* v44 0010 1100 */
    1, /* v45 0010 1101 */
    1, /* v46 0010 1110 */
    1, /* v47 0010 1111 */

    2, /* v48 0011 0000 */
    2, /* v49 0011 0001 */
    2, /* v50 0011 0010 */
    3, /* v51 0011 0011 */
    2, /* v52 0011 0100 */
    2, /* v53 0011 0101 */
    3, /* v54 0011 0110 */
    3, /* v55 0011 0111 */
    2, /* v56 0011 1000 */
    2, /* v57 0011 1001 */
    2, /* v58 0011 1010 */
    3, /* v59 0011 1011 */
    3, /* v60 0011 1100 */
    3, /* v61 0011 1101 */
    3, /* v62 0011 1110 */
    3, /* v63 0011 1111 */

    0, /* v64 0100 0000 */
    0, /* v65 0100 0001 */
    0, /* v66 0100 0010 */
    1, /* v67 0100 0011 */
    0, /* v68 0100 0100 */
    0, /* v69 0100 0101 */
    1, /* v70 0100 0110 */
    1, /* v71 0100 0111 */
    0, /* v72 0100 1000 */
    0, /* v73 0100 1001 */
    0, /* v74 0100 1010 */
    1, /* v75 0100 1011 */
    1, /* v76 0100 1100 */
    1, /* v77 0100 1101 */
    1, /* v78 0100 1110 */
    1, /* v79 0100 1111 */

    0, /* v80 0101 0000 */
    0, /* v81 0101 0001 */
    0, /* v82 0101 0010 */
    1, /* v83 0101 0011 */
    0, /* v84 0101 0100 */
    0, /* v85 0101 0101 */
    1, /* v86 0101 0110 */
    1, /* v87 0101 0111 */
    0, /* v88 0101 1000 */
    0, /* v89 0101 1001 */
    0, /* v90 0101 1010 */
    1, /* v91 0101 1011 */
    1, /* v92 0101 1100 */
    1, /* v93 0101 1101 */
    1, /* v94 0101 1110 */
    1, /* v95 0101 1111 */

    2, /* v96  0110 0000 */
    2, /* v97  0110 0001 */
    2, /* v98  0110 0010 */
    2, /* v99  0110 0011 */
    2, /* v100 0110 0100 */
    2, /* v101 0110 0101 */
    2, /* v102 0110 0110 */
    3, /* v103 0110 0111 */
    2, /* v104 0110 1000 */
    2, /* v105 0110 1001 */
    2, /* v106 0110 1010 */
    3, /* v107 0110 1011 */
    3, /* v108 0110 1100 */
    3, /* v109 0110 1101 */
    3, /* v110 0110 1110 */
    3, /* v111 0110 1111 */

    2, /* v112 0111 0000 */
    2, /* v113 0111 0001 */
    2, /* v114 0111 0010 */
    3, /* v115 0111 0011 */
    2, /* v116 0111 0100 */
    2, /* v117 0111 0101 */
    3, /* v118 0111 0110 */
    3, /* v119 0111 0111 */
    2, /* v120 0111 1000 */
    2, /* v121 0111 1001 */
    2, /* v122 0111 1010 */
    3, /* v123 0111 1011 */
    3, /* v124 0111 1100 */
    3, /* v125 0111 1101 */
    3, /* v126 0111 1110 */
    3, /* v127 0111 1111 */

    0, /* v128 1000 0000 */
    0, /* v129 1000 0001 */
    0, /* v130 1000 0010 */
    1, /* v131 1000 0011 */
    0, /* v132 1000 0100 */
    0, /* v133 1000 0101 */
    1, /* v134 1000 0110 */
    1, /* v135 1000 0111 */
    0, /* v136 1000 1000 */
    0, /* v137 1000 1001 */
    0, /* v138 1000 1010 */
    1, /* v139 1000 1011 */
    1, /* v140 1000 1100 */
    1, /* v141 1000 1101 */
    1, /* v142 1000 1110 */
    1, /* v143 1000 1111 */

    0, /* v144 1001 0000 */
    0, /* v145 1001 0001 */
    0, /* v146 1001 0010 */
    1, /* v147 1001 0011 */
    0, /* v148 1001 0100 */
    0, /* v149 1001 0101 */
    1, /* v150 1001 0110 */
    1, /* v151 1001 0111 */
    0, /* v152 1001 1000 */
    0, /* v153 1001 1001 */
    0, /* v154 1001 1010 */
    1, /* v155 1001 1011 */
    1, /* v156 1001 1100 */
    1, /* v157 1001 1101 */
    1, /* v158 1001 1110 */
    1, /* v159 1001 1111 */

    0, /* v160 1010 0000 */
    0, /* v161 1010 0001 */
    0, /* v162 1010 0010 */
    1, /* v163 1010 0011 */
    0, /* v164 1010 0100 */
    0, /* v165 1010 0101 */
    1, /* v166 1010 0110 */
    1, /* v167 1010 0111 */
    0, /* v168 1010 1000 */
    0, /* v169 1010 1001 */
    0, /* v170 1010 1010 */
    1, /* v171 1010 1011 */
    1, /* v172 1010 1100 */
    1, /* v173 1010 1101 */
    1, /* v174 1010 1110 */
    1, /* v175 1010 1111 */

    2, /* v176 1011 0000 */
    2, /* v177 1011 0001 */
    2, /* v178 1011 0010 */
    3, /* v179 1011 0011 */
    2, /* v180 1011 0100 */
    2, /* v181 1011 0101 */
    3, /* v182 1011 0110 */
    3, /* v183 1011 0111 */
    2, /* v184 1011 1000 */
    2, /* v185 1011 1001 */
    2, /* v186 1011 1010 */
    3, /* v187 1011 1011 */
    3, /* v188 1011 1100 */
    3, /* v189 1011 1101 */
    3, /* v190 1011 1110 */
    3, /* v191 1011 1111 */

    2, /* v192 1100 0000 */
    2, /* v193 1100 0001 */
    2, /* v194 1100 0010 */
    3, /* v195 1100 0011 */
    2, /* v196 1100 0100 */
    2, /* v197 1100 0101 */
    3, /* v198 1100 0110 */
    3, /* v199 1100 0111 */
    2, /* v200 1100 1000 */
    2, /* v201 1100 1001 */
    2, /* v202 1100 1010 */
    3, /* v203 1100 1011 */
    3, /* v204 1100 1100 */
    3, /* v205 1100 1101 */
    3, /* v206 1100 1110 */
    3, /* v207 1100 1111 */

    2, /* v208 1101 0000 */
    2, /* v209 1101 0001 */
    2, /* v210 1101 0010 */
    3, /* v211 1101 0011 */
    2, /* v212 1101 0100 */
    2, /* v213 1101 0101 */
    3, /* v214 1101 0110 */
    3, /* v215 1101 0111 */
    2, /* v216 1101 1000 */
    2, /* v217 1101 1001 */
    2, /* v218 1101 1010 */
    3, /* v219 1101 1011 */
    3, /* v220 1101 1100 */
    3, /* v221 1101 1101 */
    3, /* v222 1101 1110 */
    3, /* v223 1101 1111 */

    2, /* v224 1110 0000 */
    2, /* v225 1110 0001 */
    2, /* v226 1110 0010 */
    3, /* v227 1110 0011 */
    2, /* v228 1110 0100 */
    2, /* v229 1110 0101 */
    3, /* v230 1110 0110 */
    3, /* v231 1110 0111 */
    2, /* v232 1110 1000 */
    2, /* v233 1110 1001 */
    2, /* v234 1110 1010 */
    3, /* v235 1110 1011 */
    3, /* v236 1110 1100 */
    3, /* v237 1110 1101 */
    3, /* v238 1110 1110 */
    3, /* v239 1110 1111 */

    2, /* v240 1111 0000 */
    2, /* v241 1111 0001 */
    2, /* v242 1111 0010 */
    3, /* v243 1111 0011 */
    2, /* v244 1111 0100 */
    2, /* v245 1111 0101 */
    3, /* v246 1111 0110 */
    3, /* v247 1111 0111 */
    2, /* v248 1111 1000 */
    2, /* v249 1111 1001 */
    2, /* v250 1111 1010 */
    3, /* v251 1111 1011 */
    3, /* v252 1111 1100 */
    3, /* v253 1111 1101 */
    3, /* v254 1111 1110 */
    3  /* v255 1111 1111 */
};

